{% extends "/layouts/base.html"%} {% block title %}Events{% endblock %} {% block body %}
<div class="d-flex flex-column flex-lg-row gap-4">
  <!-- Columna de filtros (izquierda) -->
  <div class="flex-shrink-0" style="width: 280px;">
    <div class="bg-white p-4 rounded-3 shadow-sm sticky-top" style="top: 20px">
      <h3 class="h5 mb-4 pb-2 border-bottom">Filtros</h3>

      <form id="filterForm" class="d-flex flex-column gap-3">
        <div>
          <label for="daterange" class="form-label fw-bold">Rango de Fechas</label>
          <input type="text" id="daterange" name="daterange" class="form-control border-warning text-dark" />
          <!-- Campos ocultos que se enviarán con el formulario -->
          <input type="hidden" id="fechaInicio" name="fechaInicio" />
          <input type="hidden" id="fechaFin" name="fechaFin" />
        </div>

        <div>
          <label class="form-label fw-bold">Tipo de evento</label>
          <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle w-100" type="button" data-bs-toggle="dropdown" aria-expanded="false">Seleccionar categorías</button>
            <ul class="dropdown-menu p-3 w-100">
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="musical" name="tipo" value="1" />
                  <label class="form-check-label" for="musical">Musical</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="festival" name="tipo" value="2" />
                  <label class="form-check-label" for="festival">Festival</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="conferencia" name="tipo" value="3" />
                  <label class="form-check-label" for="conferencia">Conferencia</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="exhibicion" name="tipo" value="4" />
                  <label class="form-check-label" for="exhibicion">Exhibición</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="fiesta" name="tipo" value="5" />
                  <label class="form-check-label" for="fiesta">Fiesta</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="teatro" name="tipo" value="6" />
                  <label class="form-check-label" for="teatro">Teatro</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="deportivo" name="tipo" value="7" />
                  <label class="form-check-label" for="deportivo">Deportivo</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="cultural" name="tipo" value="8" />
                  <label class="form-check-label" for="cultural">Cultural</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="gastronomia" name="tipo" value="9" />
                  <label class="form-check-label" for="gastronomia">Gastronomía</label>
                </div>
              </li>
              <li class="mb-2">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="educativo" name="tipo" value="10" />
                  <label class="form-check-label" for="educativo">Educativo</label>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div class="mb-2">
          <label for="presupuesto" class="form-label fw-bold">Presupuesto máximo</label>
          <div class="input-group">
            <span class="input-group-text">$</span>
            <input class="form-control" type="number" id="presupuesto" name="presupuesto" placeholder="MXN" min="0" max="5000" />
          </div>
        </div>

        <button type="submit" class="btn btn-warning w-100 mt-2">Buscar eventos</button>
      </form>
    </div>
  </div>

  <!-- Columna de eventos (derecha) -->
  <div class="flex-grow-1">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="h4 m-0">Eventos disponibles</h2>
      <span class="badge bg-primary rounded-pill" id="eventCount">{{ events|length }} eventos</span>
    </div>

    <!-- Contenedor para los resultados con Flexbox -->
    <div id="eventResults" class="d-flex flex-wrap gap-4">
      {% for event in events %}
      <div class="flex-grow-0" style="width: calc(33.333% - 1rem);">
        <div class="card h-100 shadow-sm">
          <div class="position-relative">
            <img class="card-img-top" src="{{ event.image }}" alt="{{ event.name }}" />
            <span class="position-absolute top-0 end-0 bg-warning text-dark m-2 px-2 py-1 rounded-pill fs-6">{{ event.type.name }}</span>
          </div>
          <div class="card-body d-flex flex-column">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <span class="bg-primary text-white px-2 py-1 rounded-2"><i class="fa-solid fa-calendar-days me-1"></i>{{ event.date.strftime('%a, %d %b %Y') }}</span>
              <span class="text-danger fw-bold">${{ event.budget }}</span>
            </div>
            <h3 class="card-title h5 fw-bold">{{ event.name }}</h3>
            <p class="card-text text-muted mb-3"><i class="fas fa-map-marker-alt me-1"></i> {{ event.location.address }}</p>
            <p class="card-text">{{ event.description|truncate(100) }}</p>
            <div class="d-flex justify-content-between mt-auto">
              <span class="text-muted"><i class="fas fa-clock me-1"></i> {{ event.time }}</span>
              <a href="/event/{{ event.id }}" class="btn btn-sm btn-outline-primary">Ver detalles</a>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}